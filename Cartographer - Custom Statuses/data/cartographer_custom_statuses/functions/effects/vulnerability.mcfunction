data modify storage ca.exposed_data lvl set value {}
data modify storage ca.exposed_data hurt set value {}

data modify storage ca.exposed_data lvl set from entity @s ActiveEffects[{Id:31b}]
data modify storage ca.exposed_data hurt set from entity @s HurtTime

execute store result score @s exposed_lvl run data get storage ca.exposed_data lvl.Amplifier
scoreboard players add @s exposed_lvl 1

execute store result score @s exposed_hit run data get storage ca.exposed_data hurt

execute if entity @s[scores={exposed_lvl=1,exposed_hit=9}] run scoreboard players set @s damage_queue 1
execute if entity @s[scores={exposed_lvl=1,exposed_hit=9}] run function cartographer_core:helper/deal_damage/by_score

execute if entity @s[scores={exposed_lvl=2,exposed_hit=9}] run scoreboard players set @s damage_queue 2
execute if entity @s[scores={exposed_lvl=2,exposed_hit=9}] run function cartographer_core:helper/deal_damage/by_score

execute if entity @s[scores={exposed_lvl=3,exposed_hit=9}] run scoreboard players set @s damage_queue 3
execute if entity @s[scores={exposed_lvl=3,exposed_hit=9}] run function cartographer_core:helper/deal_damage/by_score

execute if entity @s[scores={exposed_lvl=4,exposed_hit=9}] run scoreboard players set @s damage_queue 4
execute if entity @s[scores={exposed_lvl=4,exposed_hit=9}] run function cartographer_core:helper/deal_damage/by_score

execute if entity @s[scores={exposed_lvl=5,exposed_hit=9}] run scoreboard players set @s damage_queue 5
execute if entity @s[scores={exposed_lvl=5,exposed_hit=9}] run function cartographer_core:helper/deal_damage/by_score

execute if entity @s[scores={exposed_lvl=6,exposed_hit=9}] run scoreboard players set @s damage_queue 6
execute if entity @s[scores={exposed_lvl=6,exposed_hit=9}] run function cartographer_core:helper/deal_damage/by_score

execute if entity @s[scores={exposed_lvl=7,exposed_hit=9}] run scoreboard players set @s damage_queue 7
execute if entity @s[scores={exposed_lvl=7,exposed_hit=9}] run function cartographer_core:helper/deal_damage/by_score

execute if entity @s[scores={exposed_lvl=8,exposed_hit=9}] run scoreboard players set @s damage_queue 8
execute if entity @s[scores={exposed_lvl=8,exposed_hit=9}] run function cartographer_core:helper/deal_damage/by_score

execute if entity @s[scores={exposed_lvl=9,exposed_hit=9}] run scoreboard players set @s damage_queue 9
execute if entity @s[scores={exposed_lvl=9,exposed_hit=9}] run function cartographer_core:helper/deal_damage/by_score

execute if entity @s[scores={exposed_lvl=10,exposed_hit=9}] run scoreboard players set @s damage_queue 10
execute if entity @s[scores={exposed_lvl=10,exposed_hit=9}] run function cartographer_core:helper/deal_damage/by_score

execute if entity @s[scores={exposed_lvl=1..,exposed_hit=9}] run playsound minecraft:block.glass.break hostile @a[distance=..20] ~ ~ ~ 1 1.5 
execute if entity @s[scores={exposed_lvl=1..,exposed_hit=9}] run playsound minecraft:block.glass.break hostile @a[distance=..20] ~ ~ ~ 1 0.75
execute if entity @s[scores={exposed_lvl=1..,exposed_hit=9}] run particle minecraft:block minecraft:cyan_stained_glass ~ ~1 ~ 0.2 0.5 0.2 1 10 normal
